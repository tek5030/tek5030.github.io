<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lab 11: Step 1: Get an overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lab 11
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Step 1: Get an overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Today we will implement and experiment with a simple segmentation method based on color. You can choose to work on images from your camera or on the provided videos captured from an autonomous vehicle.</p>
<p>The idea is that each pixel corresponds to a 3-dimensional feature vector [R,G,B] (or [B,G,R] in OpenCV). Pixels with similar colors should be in the same region of the 3-dimensional feature space. If we know what kind of pixels we are looking for, we can represent them using a multivariate normal distribution. We can then use the Mahalanobis distance to determine how well a pixel fit with the distribution. Doing so for all pixels in an image gives us an image of Mahalanobis distances between the pixels and the distribution.</p>
<p>By thresholding the Mahalanobis distance image we get a binary image indicating the pixels that are closer than the chosen threshold.</p>
<p>As we will experience, this simplistic approach is far from perfect. But the method can naturally be generalized and improved:</p>
<ul>
<li>Each pixel can be represented by more features than just color, thus increasing the dimension of the feature space.</li>
<li>The group of pixels that we want to segment out might not fit well with a multivariate normal distribution, so we can use a more flexible distribution instead.</li>
</ul>
<h2>Lab overview</h2>
<p>The main steps in today's lab are:</p>
<ul>
<li><p class="startli"><b>Estimate a multivariate normal distribution</b> based on the pixels in a predefined sample region of a single image.</p>
<div class="image">
<img src="img/from_rgb_to_normal_dist.png" alt="illustration of the estimation process"/>
</div>
</li>
<li>For the following images, <b>create a Mahalanobis image</b> by computing the Mahalanobis distance between each pixel and the multivariate normal distribution. Transform the Mahalanobis image to get an image in the [0,1] range.</li>
<li><p class="startli"><b>Create a binary image</b> by thresholding the transformed Mahalanobis image manually or by using Otsu's method. The final binary image is the result of our segmentation method and we can use it to highlight the corresponding pixels in the original image. If the result is noisy, we can clean up this binary image using morphological operations.</p>
<div class="image">
<img src="img/from_rgb_and_normal_dist_to_segmentation.png" alt="Illustration of the evaluation process"/>
</div>
<ul>
<li>We will also implement a way to gradually update the multivariate normal distribution based on how the pixels in the sampling region change over time.</li>
</ul>
<p class="startli">Finally we will use our segmentation method to perform road segmentation in videos captured from an autonomous vehicle.</p>
<div class="image">
<img src="img/road_segmentation.png" alt="Illustrations of the road segmentation"/>
</div>
</li>
</ul>
<h2>Introduction to the project source files</h2>
<p>We have chosen to distribute the code on the following files:</p><ul>
<li><p class="startli"><em><a class="el" href="main_8cpp.html">main.cpp</a></em></p>
<p class="startli">Handles the reading of images, the visualization of the segmentation and the manual thresholding of the transformed Mahalanobis image. Note in particular that:</p><ul>
<li>Keypress <code>space</code> samples pixels from the sampling region and estimates the multivariate normal model</li>
<li>Keypress <code>o</code> turns thresholding by Otsu's method on/off (Default is off)</li>
<li>Keypress <code>a</code> turns the adaptive model on/off (Default is off)</li>
</ul>
<p class="startli">If you want to work on images from one of the videos instead of from the camera, you can change to code from <code><a class="elRef" doxygen="/home/rsm/dev/tek5030/2021/tek5030.github.io/doxygen-tags/opencv.tag:http://docs.opencv.org/4.0.1/" href="http://docs.opencv.org/4.0.1/d8/dfe/classcv_1_1VideoCapture.html">cv::VideoCapture</a> cap{0}</code> to <code><a class="elRef" doxygen="/home/rsm/dev/tek5030/2021/tek5030.github.io/doxygen-tags/opencv.tag:http://docs.opencv.org/4.0.1/" href="http://docs.opencv.org/4.0.1/d8/dfe/classcv_1_1VideoCapture.html">cv::VideoCapture</a> cap{"your_video_path.avi"}</code>.</p>
</li>
<li><p class="startli"><em><a class="el" href="multivariate__normal__model_8h.html">multivariate_normal_model.h</a>, <a class="el" href="multivariate__normal__model_8cpp.html">multivariate_normal_model.cpp</a></em></p>
<p class="startli">Contains the definition of the class <code><a class="el" href="classMultivariateNormalModel.html" title="A class that stores a trained multivariate normal model. ">MultivariateNormalModel</a></code>.</p>
<p class="startli">You will implement several methods in this class.</p>
<p class="startli">Please continue to the <a class="el" href="2-finish-multivariate-normal-model_8md.html">2-finish-multivariate-normal-model.md</a> "next step". </p>
</li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 1 2021 10:48:52 for Lab 11 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
